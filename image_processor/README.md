# 批量图片处理工具

## 项目介绍

这是一个使用Python编写的批量图片处理工具，支持调整大小、格式转换、添加水印、重命名和压缩等操作。工具提供了直观的图形界面，方便用户批量处理图片文件。

## 功能列表

- **批量调整图片尺寸**：支持按比例缩放和固定大小调整，可选择是否保持宽高比
- **批量格式转换**：支持JPEG、PNG、WebP、BMP、GIF等格式之间的转换
- **批量添加水印**：支持添加文字水印和图片水印，可调整位置和透明度
- **批量重命名**：支持按规则重命名文件，可使用索引、时间戳等变量
- **批量压缩图片**：支持调整压缩质量，优化图片大小

## 安装说明

1. **克隆项目**：将项目文件下载到本地

2. **安装依赖**：
   ```bash
   cd image_processor
   python -m pip install -r requirements.txt
   ```
   或直接安装Pillow库：
   ```bash
   python -m pip install Pillow==10.0.0
   ```

3. **运行程序**：
   ```bash
   python src/app.py
   ```

## 使用方法

### 1. 添加图片文件

- **添加文件**：点击"添加文件"按钮，选择一个或多个图片文件
- **添加文件夹**：点击"添加文件夹"按钮，选择包含图片的文件夹，工具会自动扫描并添加所有图片文件
- **清除文件**：点击"清除文件"按钮，清空当前文件列表

### 2. 配置处理操作

1. **选择操作类型**：从下拉菜单中选择要执行的操作类型
2. **配置操作参数**：根据选择的操作类型，配置相应的参数
   - **调整大小**：选择调整方式（按比例或固定大小），设置比例或尺寸，选择是否保持宽高比
   - **格式转换**：选择目标格式
   - **添加文字水印**：输入水印文字，选择位置和字体大小
   - **添加图片水印**：选择水印图片，设置位置和透明度
   - **重命名**：设置命名规则，可使用{index}、{timestamp}、{original}等变量
   - **压缩**：调整压缩质量
3. **添加操作**：点击"添加操作"按钮，将配置好的操作添加到处理队列
4. **管理队列**：在"处理队列"中查看已添加的操作，可选择并移除不需要的操作

### 3. 设置输出目录

- 点击"设置输出目录"按钮，选择处理后图片的保存位置
- 默认输出目录为项目根目录下的`output`文件夹

### 4. 开始处理

- 点击"开始处理"按钮，工具会开始批量处理所有添加的图片
- 处理过程中，进度条会显示当前处理进度
- 处理完成后，会弹出提示框，显示处理结果保存的位置

### 5. 查看处理结果

- 处理完成后，可在输出目录中查看处理后的图片
- 工具提供了处理前后对比视图，可直观查看处理效果

## 注意事项

1. **支持的图片格式**：JPG、PNG、WebP、BMP、GIF等常见图片格式
2. **水印图片**：添加图片水印时，建议使用PNG格式的图片，以获得更好的透明效果
3. **处理速度**：处理大量图片时，速度可能会受到图片大小和计算机性能的影响
4. **内存使用**：处理大尺寸图片时，可能会占用较多内存，请确保计算机有足够的内存
5. **输出目录**：请确保输出目录有写入权限

## 技术说明

- **核心库**：Pillow（Python图像处理库）
- **UI框架**：tkinter（Python内置GUI库）
- **多线程**：使用线程处理图片，避免界面卡顿

## 项目结构

```
image_processor/
├── src/                  # 源代码目录
│   ├── app.py            # 主应用程序，包含UI界面
│   └── image_processor.py # 核心图片处理模块
├── output/               # 默认输出目录
├── env/                  # 环境目录
├── requirements.txt      # 依赖文件
└── README.md             # 说明文档
```

## 常见问题

### Q: 为什么添加水印后图片质量下降？
A: 添加水印时，工具会对图片进行重新编码，可能会导致轻微的质量损失。建议在处理过程的最后一步添加水印，以减少编码次数。

### Q: 为什么处理某些图片时出错？
A: 可能是由于图片格式不支持或图片文件损坏。请确保使用的是常见的图片格式，且文件未损坏。

### Q: 如何提高处理速度？
A: 可以尝试以下方法：
- 减少同时处理的图片数量
- 降低图片尺寸
- 使用更高效的格式（如WebP）
- 关闭不必要的操作

## 版本更新

- **v1.0.0**：初始版本，实现了所有核心功能

## 许可证

本项目采用MIT许可证，欢迎自由使用和修改。
